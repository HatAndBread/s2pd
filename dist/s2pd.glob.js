var s=function(t){var i={};function e(s){if(i[s])return i[s].exports;var h=i[s]={i:s,l:!1,exports:{}};return t[s].call(h.exports,h,h.exports,e),h.l=!0,h.exports}return e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:s})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(e.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var h in t)e.d(s,h,function(i){return t[i]}.bind(null,h));return s},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=0)}([function(t,i,e){"use strict";e.r(i),e.d(i,"mouseX",(function(){return N})),e.d(i,"mouseY",(function(){return V})),e.d(i,"touchX",(function(){return _})),e.d(i,"touchY",(function(){return $})),e.d(i,"touchEndX",(function(){return Q})),e.d(i,"touchEndY",(function(){return Z})),e.d(i,"touchMoveX",(function(){return J})),e.d(i,"touchMoveY",(function(){return K})),e.d(i,"percentLoaded",(function(){return et})),e.d(i,"percentImagesLoaded",(function(){return st})),e.d(i,"percentSoundLoaded",(function(){return ht})),e.d(i,"onClick",(function(){return nt})),e.d(i,"onTouch",(function(){return ot})),e.d(i,"onResize",(function(){return yt})),e.d(i,"updateGlobals",(function(){return at})),e.d(i,"resize",(function(){return ft})),e.d(i,"clear",(function(){return lt})),e.d(i,"dontClear",(function(){return dt})),e.d(i,"onCollision",(function(){return l})),e.d(i,"loadAudio",(function(){return P})),e.d(i,"s2pd",(function(){return u})),e.d(i,"ezSetup",(function(){return pt})),e.d(i,"whileLoading",(function(){return rt})),e.d(i,"onFirstTime",(function(){return ct})),e.d(i,"cancelDraw",(function(){return gt})),e.d(i,"uncancelDraw",(function(){return ut})),e.d(i,"loop",(function(){return L})),e.d(i,"createCanvas",(function(){return j})),e.d(i,"stopLoop",(function(){return mt})),e.d(i,"addCanvas",(function(){return B})),e.d(i,"stillCanvas",(function(){return S})),e.d(i,"backgroundColor",(function(){return H})),e.d(i,"canvasOpacity",(function(){return M})),e.d(i,"RandomNoRepeat",(function(){return h})),e.d(i,"getRandomColor",(function(){return n})),e.d(i,"randomBetween",(function(){return a})),e.d(i,"roundToDecimals",(function(){return o})),e.d(i,"choose",(function(){return r})),e.d(i,"width",(function(){return tt})),e.d(i,"height",(function(){return it})),e.d(i,"Sprite",(function(){return W})),e.d(i,"Circle",(function(){return T})),e.d(i,"Ellipse",(function(){return D})),e.d(i,"Rectangle",(function(){return A})),e.d(i,"Line",(function(){return d})),e.d(i,"Text",(function(){return C})),e.d(i,"Background",(function(){return G})),e.d(i,"Tile",(function(){return R})),e.d(i,"keyDown",(function(){return x})),e.d(i,"keyUp",(function(){return y})),e.d(i,"enableAudio",(function(){return b})),e.d(i,"Sound",(function(){return X}));var s=class{constructor(t,i,e){this.id=u.getId(),this.color=t,this.xPos=i,this.yPos=e,this.velX=0,this.velY=0,this.opacity=1,u.allGameObjects.push(this)}hitDetect(){this.detectHit=!0,u.hitDetectObjects.push(this)}onClick(t,i){this.clickFunction=t,i&&(this.triggerClickOnce=!0)}onHold(t){this.holdFunction=t,u.holdableObjects.includes(this)||u.holdableObjects.push(this)}drag(){this.dragging=!0}platform(t){this.intersect?console.warn("Lines are not supported as platforms yet. Use a rectangle instead."):(this.block=!!t,u.platforms.push(this))}notPlatform(){this.block=!1;for(let t=0;t<u.platforms.length;t++)u.platforms[t]===this&&u.platforms.splice(t,1);console.log(u.platforms)}destroy(){const t=t=>{for(let i=t.length;i>=0;i--)t[i]&&t[i].id&&t[i].id===this.id&&t.splice(i,1)};for(let t=0;t<u.collisions.length;t++)u.collisions[t].obj1.id!==this.id&&u.collisions[t].obj2.id!==this.id||u.collisions.splice(t,1);t(u.allBackgrounds),t(u.allGameObjects),t(u.hitDetectObjects),t(u.holdableObjects),t(u.gravity),t(u.platforms),u.delete(this)}};class h{constructor(t){this.arr=t,this.storage=[],this.randomize()}randomize(){for(;this.arr.length>0;){let t=Math.floor(Math.random()*this.arr.length);if(this.storage.push(this.arr[t]),this.arr.splice(t,1),0===this.arr.length){this.arr=[...this.storage];break}}}get(){if(0===this.storage.length){return this.randomize(),this.storage.splice(0,1)}return this.storage.splice(0,1)}}function a(t,i){return Math.floor(Math.random()*(i-t+1))+t}function n(){return`rgb(${a(0,255)},${a(0,255)},${a(0,255)})`}function o(t,i){let e;switch(i){case 0:e=1;break;case 1:e=10;break;case 2:e=100;break;case 3:e=1e3;break;case 4:e=1e4;break;case 5:e=1e5;break;case 6:e=1e6;break;default:e=100,console.error("@roundToDecimal: Max digits is 6.")}return Math.round((t+Number.EPSILON)*e)/e}function r(t,i){let e=Math.floor(2*Math.random());return 0===e?t:1===e?i:void 0}function c(t,i){return Math.sqrt(Math.pow(t,2)+Math.pow(i,2))}function l(t,i,e,s){!t.detectHit&&t.hitDetect&&t.hitDetect(),!i.detectHit&&i.hitDetect&&i.hitDetect(),"function"!=typeof s?console.error("üëÆ‚Äç‚ôÄÔ∏è@onCollision: Callback function required."):u.hitDetectObjects.includes(t)&&u.hitDetectObjects.includes(i)&&u.collisions.push({obj1:t,obj2:i,callback:s,triggerOnce:e,triggered:!1})}var d=class extends s{constructor(t,i,e,s,h,a){super(t),this.startX=i,this.startY=e,this.endX=s,this.endY=h,this.clickFunction=null,this.color=t,this.velX=0,this.velY=0,this.thickness=a,this.loaded=!0,this.length=c(this.startX-this.endX,this.startY-this.endY),this.dragStart={xStart:null,yStart:null,xEnd:null,yEnd:null,lastX:null,lastY:null},this.updatePos()}updatePos(){this.length=c(this.startX-this.endX,this.startY-this.endY),u.ctx.beginPath(),u.ctx.moveTo(this.startX,this.startY),u.ctx.lineTo(this.endX,this.endY),u.ctx.lineWidth=this.thickness,u.ctx.strokeStyle=this.color,u.ctx.stroke(),this.jumping&&u.jump(this,this.jumpHeight,this.jumpLength),this.startX+=this.velX,this.endX+=this.velX,this.startY+=this.velY,this.endY+=this.velY,this.dragging?this.dragStart.xStart?u.draggingWithMouse?(this.dragStart.xDiff=u.mouseX-this.dragStart.lastX,this.dragStart.yDiff=u.mouseY-this.dragStart.lastY,this.startX=this.startX+this.dragStart.xDiff,this.startY=this.startY+this.dragStart.yDiff,this.endX=this.endX+this.dragStart.xDiff,this.endY=this.endY+this.dragStart.yDiff,this.dragStart.lastX=u.mouseX,this.dragStart.lastY=u.mouseY):(this.dragStart.xDiff=u.touchMoveX-this.dragStart.lastX,this.dragStart.yDiff=u.touchMoveY-this.dragStart.lastY,this.startX=this.startX+this.dragStart.xDiff,this.startY=this.startY+this.dragStart.yDiff,this.endX=this.endX+this.dragStart.xDiff,this.endY=this.endY+this.dragStart.yDiff,this.dragStart.lastX=u.touchMoveX,this.dragStart.lastY=u.touchMoveY):(this.dragStart.xStart=this.startX,this.dragStart.yStart=this.startY,this.dragStart.xEnd=this.endY,this.dragStart.yEnd=this.endY,u.draggingWithMouse?(this.dragStart.lastX=u.mouseX,this.dragStart.lastY=u.mouseY):(this.dragStart.lastX=u.touchX,this.dragStart.lastY=u.touchY,console.log(u.touchX))):(this.dragStart.x=null,this.dragStart.y=null,this.dragStart.xDiff=null,this.dragStart.yDiff=null)}distanceFromMe(t,i){const e=c(t-this.startX,i-this.startY),s=c(t-this.endX,i-this.endY);return Math.abs(this.length-(e+s))}intersect(t,i,e,s,h,a,n,o){var r,c,l,d,g,u,m,f,p,y;function x(t,i){return Math.sign(t)==Math.sign(i)}return y=(r=s-i)*n+(l=t-e)*o+(g=e*i-t*s),0!==(p=r*h+l*a+g)&&0!==y&&x(p,y)?0:(f=(c=o-a)*e+(d=h-n)*s+(u=n*a-h*o),0!==(m=c*t+d*i+u)&&0!==f&&x(m,f)?0:(r*d-c*l,1))}};const g={loadedImages:0,loadedAudio:0,looping:!1,objectsToLoad:[],ids:[],percentLoaded:0,percentImagesLoaded:0,percentSoundLoaded:0,allAudioObjects:[],touching:!1,allGameObjects:[],allBackgrounds:[],holdableObjects:[],hitDetectObjects:[],cancelDraw:!1,collisions:[],platforms:[],gravity:[],dragStarted:!1,draggingWithMouse:!0,clear:!0,mouseX:null,mouseY:null,touchX:null,touchY:null,touchMoveX:null,touchMoveY:null,touchEndX:null,touchEndY:null,keyDown:[],keyUp:[],orientation:void 0,exit:!1,enableDragAndDrop:!0,firstTimeThroughLoop:!0,canvas:null,onResize:null,ctx:null,jump:function(t,i){if(!(t instanceof d)){const e=Math.abs(t.yPos-t.jumpStart);e<=i/2?t.yPos-=t.originalGravityLevel:e>i/2?(t.gravityLevel-=t.accelerationRate,t.yPos-=t.gravityLevel,t.gravityLevel<=0&&(t.gravityLevel=t.originalGravityLevel,t.jumping=!1)):(t.gravityLevel=t.originalGravityLevel,t.jumping=!1)}},getId:()=>{let t=Math.floor(1e6*Math.random());if(!g.ids.includes(t))return g.ids.push(t),t;g.getId()},delete:t=>{null}};window.core=g;var u=g;const m=new Array(222),f=new Array(222);function p(t){switch("number"==typeof t?t=t.toString():"string"==typeof t?t=t.toLowerCase():console.error("Type error."),t){case"shift":return 16;case"up":case"uparrow":case"uparrowkey":case"arrowupkey":case"up-arrow":case"up arrow":case"arrowup":case"arrow-up":case"arrow up":return 38;case"down":case"downarrow":case"downarrowkey":case"arrowdownkey":case"down-arrow":case"down arrow":case"arrow down":case"arrowdown":case"arrow-down":return 40;case"left":case"leftarrow":case"leftarrowkey":case"arrowleftkey":case"arrowleft":case"arrow-left":case"arrow left":case"left arrrow":case"left-arrow":return 37;case"right":case"rightarrow":case"arrowright":case"right-arrow":case"arrow-right":case"right arrow":case"arrow right":case"rightarrowkey":case"arrowrightkey":return 39;case"space":case"spacekey":return 32;case"enter":case"return":case"returnkey":return 13;case"esc":case"escape":case"escapekey":return 27;case"a":return 65;case"b":return 66;case"c":return 67;case"d":return 68;case"e":return 69;case"f":return 70;case"g":return 71;case"h":return 72;case"i":return 73;case"j":return 74;case"k":return 75;case"l":return 76;case"m":return 77;case"n":return 78;case"o":return 79;case"p":return 80;case"q":return 81;case"r":return 82;case"s":return 83;case"t":return 84;case"u":return 85;case"v":return 86;case"w":return 87;case"x":return 88;case"y":return 89;case"z":return 90;case"1":return 49;case"2":return 50;case"3":return 51;case"4":return 52;case"5":return 53;case"6":return 54;case"7":return 55;case"8":return 56;case"9":return 57;case"0":return 48;case"period":case".":return 190;case",":case"comma":return 188;case"backslash":case"/":case"back-slash":case"back slash":return 220;case"singlequote":case"single-quote":case"'":case"single quote":return 222;case"equal":case"equals":case"=":return 187;case"semicolon":case"semi-colon":case"semi colon":case";":return 186;case"back":case"backspace":case"back-space":return 8;case"tab":return 9;case"ctrl":return 17;case"alt":return 18;case"del":case"delete":return 46;case"add":case"+":case"plus":return 107;case"subtract":case"minus":case"-":return 109;default:console.error("unknown keycode: "+t)}}function y(t,i){if("string"==typeof t){let e=p(t);f[e]=i}else f[t]=i}function x(t,i,e){if("string"==typeof t){let s=p(t);m[s]={callback:i,triggerOnce:e,triggered:!1}}else m[t]={callback:i,triggerOnce:e,triggered:!1}}function w(t){let i=m[t.keyCode];u.preventDefaultKeyboard&&("ArrowRight"!==t.code&&"ArrowLeft"!==t.code&&"ArrowUp"!==t.code&&"ArrowDown"!==t.code||t.preventDefault()),i&&!u.looping&&(i.triggerOnce&&!i.triggered?(i.callback(),i.triggered=!0):i.callback()),i&&u.looping&&(u.keyDown.includes(t.keyCode)||u.keyDown.push(t.keyCode))}function v(t){u.preventDefaultKeyboard&&("ArrowRight"!==t.code&&"ArrowLeft"!==t.code&&"ArrowUp"!==t.code&&"ArrowDown"!==t.code||t.preventDefault()),m.forEach(t=>{t.triggered&&(t.triggered=!1,u.keyDown.splice(0,u.keyDown.length))}),f[t.keyCode]&&!u.looping&&f[t.keyCode](),u.looping&&u.keyUp.push(t.keyCode)}function b(){let t=window.AudioContext||window.webkitAudioContext||!1;t?u.audioContext=new t:alert("Sorry. You need to update your browser to use web audio. ")}function P(){let t=window.AudioContext||window.webkitAudioContext||!1;t?u.audioContext=new t:alert("Sorry. You need to update your browser in order to play this game. "),u.objectsToLoad.forEach(t=>{t instanceof X&&t.load()})}class X{constructor(t,i,e,s){u.objectsToLoad.push(this),this.source=t,this.volume=i,this.volume=0===i?i:i||.5,this.playbackRate=s||1,this.loop=!!e,this.startTime,this.pauseTime=0,this.pauseStartTime=0,this.pauseDuration=0,this.gainNode,this.duration,this.theSound,this.playSound,this.stopped=!0,this.fileSize=0,this.amountLoaded=0,this.loaded=!1,this.totallyLoaded=!1}load(){let t,i=new XMLHttpRequest;i.open("GET",this.source,!0),i.responseType="arraybuffer",i.onload=()=>{u.audioContext.decodeAudioData(i.response,i=>{t=i,this.theSound=t,this.loaded=!0,this.requestToPlayBeforeLoaded&&(this.play(),this.stopped=!1,this.requestToPlayBeforeLoaded=!1)})},i.onloadend=()=>{this.totallyLoaded=!0,this.loaded=!0,u.loadedAudio+=1},i.send(),u.allAudioObjects.push(this)}play(){this.loaded?(this.stopped=!1,this.playSound=u.audioContext.createBufferSource(),this.gainNode=u.audioContext.createGain(),this.gainNode.gain.value=this.volume,this.playSound.buffer=this.theSound,this.playSound.connect(this.gainNode),this.gainNode.connect(u.audioContext.destination),this.playSound.playbackRate.value=this.playbackRate,this.playSound.start(0,this.pauseTime),this.startTime=Date.now(),this.loop&&(this.playSound.loop=!0)):this.requestToPlayBeforeLoaded=!0}stop(){this.stopped?console.warn("Called stop on already stopped audio object. üëÆ‚Äç‚ôÄÔ∏è","This may cause errors in some browsers."):(this.playSound.stop(),this.stopped=!0)}pause(){this.stopped||(this.playSound.stop(),this.stopped=!0),this.pauseStartTime=Date.now(),this.playSound.stop(),this.pauseTime+=(Date.now()-this.startTime)/1e3,this.pauseTime>this.playSound.buffer.duration&&(this.pauseTime=this.pauseTime%this.playSound.buffer.duration)}}function Y(t){t.triggerOnce?t.triggered||(t.triggered=!0,t.callback()):t.callback()}function k(t,i,e){for(let s=0;s<u.collisions.length;s++)(u.collisions[s].obj1.id===t.id&&u.collisions[s].obj2.id===i.id||u.collisions[s].obj1.id===i.id&&u.collisions[s].obj2.id===t.id)&&(e?Y(u.collisions[s]):u.collisions[s].triggered=!1)}function F(t,i){let e=i.hitBoxX+i.hitBoxWidth/2,s=i.hitBoxY+i.hitBoxY/2;t.distanceFromMe(e,s)<.1*t.thickness?k(t,i,!0):k(t,i,!1)}function O(t,i){if(t&&i&&t.hitBoxX<=i.hitBoxX+i.hitBoxWidth&&t.hitBoxX+t.hitBoxWidth>=i.hitBoxX&&t.hitBoxY<=i.hitBoxY+i.hitBoxHeight&&t.hitBoxY+t.hitBoxHeight>=i.hitBoxY)return!0}function I(){let t=0;for(let i=0;i<u.objectsToLoad.length;i++)u.objectsToLoad[i]instanceof X||(t+=1);return t}function L(t){u.looping=!0,u.width=u.canvas.width,u.height=u.canvas.height,u.percentLoaded=(u.loadedImages+u.loadedAudio)/u.objectsToLoad.length*100,u.percentImagesLoaded=u.loadedImages/I()*100,u.percentSoundLoaded=u.loadedAudio/(u.objectsToLoad.length-I())*100,u.percentLoaded===1/0&&(u.percentLoaded=0),0===u.objectsToLoad.length&&(u.percentLoaded=100),at(),u.clear&&u.ctx.clearRect(0,0,u.width,u.height);for(let t=0;t<u.allAudioObjects.length;t++)u.allAudioObjects[t].ended&&(u.allAudioObjects.nowPlaying=!1);for(let t=0;t<u.allBackgrounds.length;t++)u.allBackgrounds[t].loaded&&(u.allBackgrounds[t].updatePos(),u.allBackgrounds[t].autoSize());for(let t=0;t<u.allGameObjects.length;t++)u.allGameObjects[t].loaded&&u.allGameObjects[t].updatePos();if(u.heldObject&&u.heldObject.holdFunction(),u.keyDown.length>0&&u.keyDown.forEach(t=>{m[t].triggerOnce&&!m[t].triggered?(m[t].callback(),m[t].triggered=!0):m[t].triggerOnce||m[t].callback()}),u.keyUp.length>0)for(let t=0;t<u.keyUp.length;t++){for(let i=0;i<u.keyDown.length;i++)u.keyDown[i]===u.keyUp[t]&&u.keyDown.splice(i,1);"function"==typeof f[u.keyUp[t]]&&f[u.keyUp[t]](),u.keyUp.splice(t,1)}if(function(){for(let t=0;t<u.gravity.length;t++){0===u.platforms.length&&(u.gravity[t].landed=!1);for(let i=0;i<u.platforms.length;i++){let e=u.platforms[i],s=u.gravity[t];O(e,s)?e.block?s.yPos<e.hitBoxY&&s.xPos>e.hitBoxX-s.hitBoxWidth/1.2&&s.xPos<e.hitBoxX+e.hitBoxWidth/1.2?(s.landed=!0,s.velY=0,s.yPos=e.hitBoxY-s.hitBoxHeight,s.accelerating=0):s.xPos<=e.xPos?s.yPos>e.hitBoxY+e.hitBoxHeight/1.2?(s.jumping=!1,s.landed=!1,s.gravityLevel=s.originalGravityLevel):s.xPos=e.hitBoxX-s.hitBoxWidth-1:s.xPos>=e.xPos&&(s.yPos>e.hitBoxY+e.hitBoxHeight/1.2?(s.jumping=!1,s.landed=!1,s.gravityLevel=s.originalGravityLevel):s.xPos=e.hitBoxX+e.hitBoxWidth+1):(s.landed=!0,s.velY=0,s.yPos=e.hitBoxY-s.hitBoxHeight,s.accelerating=0):s.landed=!1}}}(),u.percentLoaded<100?"function"==typeof u.loadingCallback&&(at(),u.loadingCallback()):(at(),u.firstTimeThroughLoop&&("function"==typeof u.firstTimeCallback?u.firstTimeCallback():u.firstTimeCallback&&console.error("üëÆ‚Äç‚ôÄÔ∏è@onFirstTime: Type error. Callback function required."),u.firstTimeThroughLoop=!1),t&&t()),u.hitDetectObjects.length>1)for(let t=0;t<u.hitDetectObjects.length;t++)for(let i=0;i<u.hitDetectObjects.length;i++)if(t!==i){let e=u.hitDetectObjects[t],s=u.hitDetectObjects[i];e instanceof d&&!(s instanceof d)?F(e,s):s instanceof d&&!(e instanceof d)?F(s,e):e instanceof d&&s instanceof d?e.intersect(e.startX,e.startY,e.endX,e.endY,s.startX,s.startY,s.endX,s.endY)?k(e,s,!0):k(e,s,!1):O(e,s)?k(e,s,!0):k(e,s,!1)}u.cancelDraw&&u.ctx.clearRect(0,0,u.width,u.height),u.exit?(u.looping=!1,u.exit=!1,u.firstTimeThroughLoop=!0):requestAnimationFrame((function(){L(t)}))}function j(t,i,e){u.canvas=document.createElement("canvas"),u.canvas.id=t,u.canvas.width=i,u.canvas.height=e,document.body.appendChild(u.canvas),u.ctx=u.canvas.getContext("2d"),u.width=i,u.height=e,at()}function B(t,i,e){u.canvas=document.getElementById(t),u.canvas.width=i,u.canvas.height=e,u.ctx=u.canvas.getContext("2d"),u.width=i,u.height=e,at()}function S(t){t?(t.toLowerCase(),"touch"===t?u.canvas.style.touchAction="none":("keyboard"===t||(u.canvas.style.touchAction="none"),u.preventDefaultKeyboard=!0)):(u.canvas.style.touchAction="none",u.preventDefaultKeyboard=!0)}function H(t){u.canvas.style.backgroundColor=t}function M(t){u.canvas.style.opacity=t}window.addEventListener("resize",()=>{u.sizeToWindow&&u.canvas&&(u.canvas.width=window.innerWidth,u.canvas.height=window.innerHeight),"function"==typeof u.onResize&&u.onResize()});class W{constructor(t,i,e,s,h){u.objectsToLoad.push(this),u.allGameObjects.push(this),this.loaded=!1,this.xPos=t,this.yPos=i,this.numberOfFrames=s||1,h?(this.animationSpeed=h,this.refreshRate=60/h):(this.animationSpeed=1,this.refreshRate=1),this.id=u.getId(),this.playedOnce=!1,this.velX=0,this.velY=0,this.loopLength=0,this.timeThroughLoop=0,this.currentFrame=0,this.animations=[{name:"default",startFrame:0,numberOfFrames:this.numberOfFrames}],this.currentAnimation=0,this.opacity=1,this.timeStamp=Date.now(),this.loader=new Promise((t,i)=>{this.theImage=new Image,this.theImage.src=e,this.theImage.addEventListener("load",t,{once:!0}),this.theImage.addEventListener("error",i,{once:!0})}).then(()=>{this.width=this.theImage.width/this.numberOfFrames,this.height=this.theImage.height,this.loaded=!0,u.loadedImages+=1,this.updatePos()}).catch(t=>{console.error("Sprite was unable to load."),console.error(t)})}updatePos(){this.hitBoxX=this.xPos,this.hitBoxY=this.yPos,this.hitBoxWidth=this.width,this.hitBoxHeight=this.height;let t=this.theImage.height,i=this.theImage.width/this.numberOfFrames;this.jumping&&u.jump(this,this.jumpHeight,this.jumpLength),this.gravity&&this.onGravity(),this.loopLength=this.refreshRate*this.animations[this.currentAnimation].numberOfFrames,this.timeThroughLoop===this.animationSpeed&&(this.currentFrame+=1,this.timeThroughLoop=0,this.currentFrame>=this.animations[this.currentAnimation].numberOfFrames&&(this.currentFrame=0,this.playedOnce=!0)),u.ctx.globalAlpha=this.opacity,u.ctx.drawImage(this.theImage,this.animations[this.currentAnimation].startFrame*i+this.currentFrame*i,0,i,t,this.xPos,this.yPos,this.width,this.height),u.ctx.globalAlpha=1,this.dragging&&(u.draggingWithMouse?(this.xPos=u.mouseX-this.width/2,this.yPos=u.mouseY-this.height/2):(this.xPos=u.touchMoveX-this.width/2,this.yPos=u.touchMoveY-this.height/2)),this.xPos+=this.velX,this.yPos+=this.velY,this.detectHit&&(this.hitBoxX=this.xPos,this.hitBoxY=this.yPos,this.hitBoxWidth=this.width,this.hitBoxHeight=this.height),this.timeThroughLoop+=1}addAnimation(t,i,e){this.animations.push({name:t,startFrame:i,numberOfFrames:e})}changeAnimationTo(t){for(let i=0;i<this.animations.length;i++)this.animations[i].name===t&&(this.currentAnimation=i)}hitDetect(){this.detectHit||(u.hitDetectObjects.push(this),this.detectHit=!0)}onClick(t,i){this.clickFunction=t,i&&(this.triggerClickOnce=!0)}onHold(t){this.holdFunction=t,u.holdableObjects.includes(this)||u.holdableObjects.push(this)}drag(){this.dragging=!0}platform(t){this.hitDetect(),this.block=!!t,u.platforms.push(this)}notPlatform(){this.block=!1;for(let t=0;t<u.platforms.length;t++)u.platforms[t]===this&&u.platforms.splice(t,1)}feelGravity(t){this.hitDetect(),u.gravity.includes(this)?(this.gravity=!0,this.accelerating=0,this.gravityLevel=t||14,this.originalGravityLevel=this.gravityLevel,this.accelerationRate=.05*this.originalGravityLevel):(u.gravity.push(this),this.gravity=!0,this.accelerating=0,this.gravityLevel=t||14,this.originalGravityLevel=this.gravityLevel,this.accelerationRate=.05*this.originalGravityLevel)}noGravity(){this.gravity=!1;for(let t=0;t<u.gravity.length;t++)u.gravity[t]===this&&u.gravity.splice(t,1)}onGravity(){this.landed||this.jumping||(this.accelerating<this.originalGravityLevel&&(this.accelerating+=this.accelerationRate,this.velY=this.accelerating),this.accelerating>=this.originalGravityLevel&&(this.velY=this.originalGravityLevel))}jump(t,i){this.hitDetect(),this.gravity?(this.accelerating=0,this.noDoubleJumps=!!i,this.noDoubleJumps?this.landed&&(this.accelerationRate=.05*this.originalGravityLevel,this.velY=0,this.jumpStart=this.yPos,this.jumpHeight=t,this.jumping=!0):(this.accelerationRate=.05*this.originalGravityLevel,this.velY=0,this.jumpStart=this.yPos,this.jumpHeight=t,this.jumping=!0)):console.warn("object.feelGravity() must be called for jump to work. üòá")}updateSize(t){t=Math.abs(t),this.width*=t,this.height*=t,this.hitBoxHeight=this.height,this.hitBoxWidth=this.width}destroy(){const t=t=>{for(let i=t.length;i>=0;i--)t[i]&&t[i].id&&t[i].id===this.id&&t.splice(i,1)};for(let t=0;t<u.collisions.length;t++)u.collisions[t].obj1.id!==this.id&&u.collisions[t].obj2.id!==this.id||u.collisions.splice(t,1);t(u.allBackgrounds),t(u.allGameObjects),t(u.hitDetectObjects),t(u.holdableObjects),t(u.gravity),t(u.platforms),u.delete(this)}}var T=class extends s{constructor(t,i,e,s,h){super(t,i,e),this.radius=s,this.thickness=h,this.loaded=!0,this.updatePos()}updatePos(){this.hitBoxWidth=2*this.radius,this.hitBoxHeight=2*this.radius,this.hitBoxX=this.xPos-this.radius,this.hitBoxY=this.yPos-this.radius,"number"==typeof this.thickness?(u.ctx.beginPath(),u.ctx.globalAlpha=this.opacity,u.ctx.strokeStyle=this.color,u.ctx.lineWidth=this.thickness,u.ctx.arc(this.xPos,this.yPos,this.radius,0,2*Math.PI),u.ctx.stroke(),u.ctx.globalAlpha=1):(u.ctx.beginPath(),u.ctx.globalAlpha=this.opacity,u.ctx.fillStyle=this.color,u.ctx.arc(this.xPos,this.yPos,this.radius,0,2*Math.PI),u.ctx.fill(),u.ctx.globalAlpha=1,this.outline&&(u.ctx.strokeStyle=this.outlineColor,u.ctx.lineWidth=this.outlineThickness,u.ctx.arc(this.xPos,this.yPos,this.radius,0,2*Math.PI),u.ctx.stroke())),this.dragging?u.draggingWithMouse?(this.xPos=u.mouseX,this.yPos=u.mouseY):(this.xPos=u.touchMoveX,this.yPos=u.touchMoveY):(this.xPos+=this.velX,this.yPos+=this.velY)}};var D=class extends s{constructor(t,i,e,s,h,a,n){super(t,i,e),this.radiusX=s,this.radiusY=h,this.rotation=a||0,this.velX=0,this.velY=0,this.opacity=1,this.thickness=n,this.loaded=!0,this.timeStamp=Date.now(),this.updatePos()}updatePos(){this.rotation>=2*Math.PI&&(this.rotation=this.rotation%Math.PI),this.rotation>.25*Math.PI&&this.rotation<.75*Math.PI||this.rotation>1.25*Math.PI&&this.rotation<1.75*Math.PI?(this.hitBoxX=this.xPos-this.radiusY,this.hitBoxY=this.yPos-this.radiusX,this.hitBoxHeight=2*this.radiusX,this.hitBoxWidth=2*this.radiusY):(this.hitBoxWidth=2*this.radiusX,this.hitBoxHeight=2*this.radiusY,this.hitBoxX=this.xPos-this.radiusX,this.hitBoxY=this.yPos-this.radiusY),"number"==typeof this.thickness?(u.ctx.strokeStyle=this.color,u.ctx.lineWidth=this.thickness,u.ctx.beginPath(),u.ctx.ellipse(this.xPos,this.yPos,this.radiusX,this.radiusY,this.rotation,0,2*Math.PI),u.ctx.stroke()):(u.ctx.fillStyle=this.color,u.ctx.beginPath(),u.ctx.ellipse(this.xPos,this.yPos,this.radiusX,this.radiusY,this.rotation,0,2*Math.PI),u.ctx.fill()),this.dragging?u.draggingWithMouse?(this.xPos=u.mouseX,this.yPos=u.mouseY):(this.xPos=u.touchMoveX,this.yPos=u.touchMoveY):(this.xPos+=this.velX,this.yPos+=this.velY)}};class A extends s{constructor(t,i,e,s,h,a){super(t,i,e),this.width=s,this.height=h,this.velX=0,this.velY=0,this.thickness=a,this.opacity=1,this.hitBoxX=this.xPos,this.hitBoxY=this.yPos,this.hitBoxWidth=this.width,this.hitBoxHeight=this.height,this.loaded=!0,this.timeStamp=Date.now(),this.updatePos()}updatePos(){this.hitBoxX=this.xPos,this.hitBoxY=this.yPos,this.hitBoxWidth=this.width,this.hitBoxHeight=this.height,"number"==typeof this.thickness?(u.ctx.globalAlpha=this.opacity,u.ctx.strokeStyle=this.color,u.ctx.lineWidth=this.thickness,u.ctx.strokeRect(this.xPos,this.yPos,this.width,this.height),u.ctx.globalAlpha=1):(u.ctx.globalAlpha=this.opacity,u.ctx.fillStyle=this.color,u.ctx.fillRect(this.xPos,this.yPos,this.width,this.height),u.ctx.globalAlpha=1),!0===this.dragging?u.draggingWithMouse?(this.xPos=u.mouseX-this.width/2,this.yPos=u.mouseY-this.height/2):(this.xPos=u.touchMoveX-this.width/2,this.yPos=u.touchMoveY-this.height/2):(this.xPos+=this.velX,this.yPos+=this.velY,this.detectHit&&(this.hitBoxX=this.xPos,this.hitBoxY=this.yPos,this.hitBoxWidth=this.width,this.hitBoxHeight=this.height))}}var C=class extends s{constructor(t,i,e,s,h,a,n,o){super(t),this.loaded=!0,"number"==typeof i?this.xPos=i:(this.xPos=u.width/2-a*s.length/4,this.centerHorizontal=!0),"number"==typeof e?this.yPos=e:(this.yPos=u.height/2-a/2,this.centerVertical=!0),this.text=s,this.font=h,this.size=a,this.thickness=n,this.innerColor=o,this.velX=0,this.velY=0,this.opacity=1,this.timeStamp=Date.now(),this.center=!1,this.longestLineLength=0,this.longestLine=0,this.leading=1.1,this.updatePos()}updatePos(){"number"!=typeof this.xPos&&(this.xPos=u.width/2-this.size*this.text.length/4,this.centerHorizontal=!0),"number"!=typeof this.yPos&&(this.yPos=u.height/2-this.size/2,this.centerVertical=!0),this.lineBreaks=this.text.split("\n");for(let t=0;t<this.lineBreaks.length;t++)this.lineBreaks[t].length>this.longestLineLength&&(this.longestLineLength=this.lineBreaks[t].length,this.longestLine=t);this.draw(),this.centerHorizontal&&(this.xPos=u.width/2-this.width/2),this.centerVertical&&(this.yPos=u.height/2-this.height/2),this.dragging?u.draggingWithMouse?(this.xPos=u.mouseX-this.width/2,this.yPos=u.mouseY+this.size/2):(this.xPos=u.touchMoveX-this.width/2,this.yPos=u.touchMoveY+this.size/2):(this.xPos+=this.velX,this.yPos+=this.velY)}draw(){if(u.ctx.globalAlpha=this.opacity,u.ctx.fillStyle=this.color,u.ctx.font=`${this.size}px ${this.font}`,u.ctx.lineWidth=this.thickness,"number"!=typeof this.thickness||"number"==typeof this.thickness&&"string"==typeof this.innerColor){let t=this.yPos;for(let i=0;i<this.lineBreaks.length;i++){let e=(u.ctx.measureText(this.lineBreaks[this.longestLine]).width-u.ctx.measureText(this.lineBreaks[i]).width)/2;this.center?u.ctx.fillText(this.lineBreaks[i],this.xPos+e,t):u.ctx.fillText(this.lineBreaks[i],this.xPos,t),t+=this.size*this.leading}}if("number"==typeof this.thickness){let t=this.yPos;for(let i=0;i<this.lineBreaks.length;i++){let e=(u.ctx.measureText(this.lineBreaks[this.longestLine]).width-u.ctx.measureText(this.lineBreaks[i]).width)/2;this.center?u.ctx.strokeText(this.lineBreaks[i],this.xPos+e,t):u.ctx.strokeText(this.lineBreaks[i],this.xPos,t),t+=this.size*this.leading}}this.width=u.ctx.measureText(this.lineBreaks[this.longestLine]).width,this.height=this.size*this.leading*this.lineBreaks.length,this.hitBoxX=this.xPos,this.hitBoxY=this.yPos-this.size,this.hitBoxWidth=this.width,this.hitBoxHeight=this.height,u.ctx.globalAlpha=1}};var G=class{constructor(t,i,e){u.objectsToLoad.push(this),u.allBackgrounds.push(this),this.loaded=!1,this.xPos=0,this.yPos=0,this.numberOfFrames=i||1,e?(this.animationSpeed=e+60%e/Math.floor(60/e),this.refreshRate=60/e):(this.animationSpeed=1,this.refreshRate=1),this.negFarXPos=0,this.velX=0,this.velY=0,this.id=u.getId(),this.source=t,this.scrolling=!1,this.loopLength=0,this.timeThroughLoop=0,this.currentFrame=0,this.animations=[{name:"default",startFrame:0,numberOfFrames:this.numberOfFrames}],this.currentAnimation=0,this.opacity=1,this.timeStamp=Date.now(),this.loader=new Promise((i,e)=>{this.theImage=new Image,this.theImage.src=t,this.theImage.addEventListener("load",i,{once:!0}),this.theImage.addEventListener("error",e,{once:!0})}).then(()=>{this.height=this.theImage.height,this.width=this.theImage.width/this.numberOfFrames,this.farXpos=this.width,this.loaded=!0,u.loadedImages+=1,this.updatePos()}).catch(t=>{console.error("Background was unable to load."),console.error(t)})}updatePos(){if(this.autoSize(),u.ctx.globalAlpha=this.opacity,this.heightOfFrame=this.theImage.height,this.widthOfFrame=this.theImage.width/this.numberOfFrames,this.loopLength=this.refreshRate*this.animations[this.currentAnimation].numberOfFrames,this.timeThroughLoop===this.animationSpeed&&(this.currentFrame+=1,this.timeThroughLoop=0,this.currentFrame>=this.animations[this.currentAnimation].numberOfFrames&&(this.currentFrame=0)),this.width<u.width/2){this.farXpos=this.width*Math.ceil(u.width/this.width)+this.xPos,this.negFarXPos=this.width*Math.ceil(u.width/this.width)*-1+this.xPos;for(let t=0;t<Math.ceil(u.width/this.width)+1;t++)this.drawImage(this.xPos+t*this.width);if(this.xPos>0)for(let t=0;t<Math.ceil(u.width/this.width);t++)this.drawImage(this.xPos-t*this.width);this.xPos<-this.width&&(this.drawImage(this.farXpos),this.xPos=0),this.negFarXPos>=-this.width&&(this.xPos=0)}if(this.width>=u.width/2&&this.width<u.width){this.farXpos=this.xPos+this.width;let t=2*this.width-u.width+this.width;this.drawImage(this.xPos),this.drawImage(this.farXpos),this.drawImage(2*this.width+this.xPos),this.drawImage(3*this.width+this.xPos),this.xPos<=-1*t&&(this.xPos=-1*(2*this.width-u.width)),this.xPos>=0&&(this.drawImage(this.xPos-this.width),this.xPos>=this.width&&(this.xPos=0,this.drawImage(this.xPos)))}this.width>=u.width&&(this.farXpos=this.xPos+this.width,this.drawImage(this.xPos),this.farXpos<=u.width&&(this.drawImage(this.farXpos),this.farXpos<=u.width-u.width&&(this.xPos=0)),this.xPos>=0&&(this.drawImage(this.xPos-this.width),this.xPos>=this.width&&(this.xPos=0,this.drawImage(this.xPos)))),u.ctx.globalAlpha=1,this.jumping&&u.jump(this,this.jumpHeight,this.jumpLength),this.xPos+=this.velX,this.yPos+=this.velY,this.timeThroughLoop+=1}addAnimation(t,i,e){this.animations.push({name:t,startFrame:i,numberOfFrames:e})}changeAnimationTo(t){for(let i=0;i<this.animations.length;i++)this.animations[i].name===t&&(this.currentAnimation=i)}autoSize(){let t=u.height/this.height;this.height=u.height,this.width=t*this.width,this.farXpos=this.xPos+u.width}drawImage(t){u.ctx.drawImage(this.theImage,this.animations[this.currentAnimation].startFrame*this.widthOfFrame+this.currentFrame*this.widthOfFrame,0,this.widthOfFrame,this.heightOfFrame,t,this.yPos,this.width+1,this.height),this.bottom()&&(this.yPos<=-1*this.height?(this.drawY(t,this.yPos+this.height),this.yPos=0):this.drawY(t,this.yPos+this.height)),this.top()&&(this.yPos>=this.height?(this.drawY(t,this.yPos-this.height),this.yPos=0):this.drawY(t,this.yPos-this.height))}drawY(t,i){u.ctx.drawImage(this.theImage,this.animations[this.currentAnimation].startFrame*this.widthOfFrame+this.currentFrame*this.widthOfFrame,0,this.widthOfFrame,this.heightOfFrame,t,i,this.width+1,this.height)}bottom(){return this.yPos<0}top(){return this.yPos>0}destroy(){const t=t=>{for(let i=t.length;i>=0;i--)t[i]&&t[i].id&&t[i].id===this.id&&t.splice(i,1)};t(u.allBackgrounds),t(u.allGameObjects),t(u.hitDetectObjects),t(u.holdableObjects),t(u.gravity),t(u.platforms),u.delete(this)}};var R=class{constructor(t,i,e,s,h,a,n){u.objectsToLoad.push(this),u.allGameObjects.push(this),this.loaded=!1,this.xPos=i||0,this.yPos=e||0,this.repeatX=s,this.repeatY=h,
//!width ? this.width = s2pd.width : this.width = width;
//!height ? this.height = s2pd.height : this.height = height;
this.numberOfFrames=a||1,this.animationSpeed=n||1,this.imageWidth,this.imageHeight,this.playedOnce=!1,this.numberOfFrames=a||1,n?(this.animationSpeed=n,this.refreshRate=60/n):(this.animationSpeed=1,this.refreshRate=1),this.id=u.getId(),this.velX=0,this.velY=0,this.innerX=0,this.innerY=0,this.innerVelX=0,this.innerVelY=0,this.loopLength=0,this.timeThroughLoop=0,this.currentFrame=0,this.animations=[{name:"default",startFrame:0,numberOfFrames:this.numberOfFrames}],this.currentAnimation=0,this.opacity=1,this.timeStamp=Date.now(),this.loader=new Promise((i,e)=>{this.theImage=new Image,this.theImage.src=t,this.theImage.addEventListener("load",i,{once:!0}),this.theImage.addEventListener("error",e,{once:!0})}).then(()=>{this.imageWidth=this.theImage.width/this.numberOfFrames,this.imageHeight=this.theImage.height,this.repeatX||(this.repeatX=u.width/this.imageWidth,this.autoResizeX=!0),this.repeatY||(this.repeatY=u.height/this.imageHeight,this.autoResizeY=!0),this.width=this.imageWidth*this.repeatX,this.height=this.imageHeight*this.repeatY,this.loaded=!0,u.loadedImages+=1,this.updatePos()}).catch(t=>{console.error("Sprite was unable to load.",t)})}updatePos(){this.hitBoxX=this.xPos,this.hitBoxY=this.yPos,this.hitBoxWidth=this.width,this.hitBoxHeight=this.height,this.heightOfFrame=this.theImage.height,this.widthOfFrame=this.theImage.width/this.numberOfFrames,this.autoResizeX&&(this.repeatX=u.width/this.imageWidth),this.autoResizeY&&(this.repeatY=u.height/this.imageHeight),this.theFormula=this.animations[this.currentAnimation].startFrame*this.widthOfFrame+this.currentFrame*this.widthOfFrame,this.jumping&&u.jump(this,this.jumpHeight,this.jumpLength),this.gravity&&this.onGravity(),(this.innerX<=-1*this.imageWidth||this.innerX>=this.imageWidth)&&(this.innerX=0),(this.innerY<=-1*this.imageHeight||this.innerY>=this.imageHeight)&&(this.innerY=0),this.loopLength=this.refreshRate*this.animations[this.currentAnimation].numberOfFrames,this.timeThroughLoop===this.animationSpeed&&(this.currentFrame+=1,this.timeThroughLoop=0,this.currentFrame>=this.animations[this.currentAnimation].numberOfFrames&&(this.currentFrame=0,this.playedOnce=!0)),u.ctx.globalAlpha=this.opacity,this.width<this.imageWidth&&(this.width=this.imageWidth);let t=this.repeatX,i=this.repeatY-1,e=this.xPos-this.imageWidth;for(let s=-1;s<t+1;s++){if(-1===s&&this.innerX<=0);else if(-1===s&&this.innerX>0){this.innerY<=0?(u.ctx.drawImage(this.theImage,this.theFormula+this.imageWidth-this.innerX,-1*this.innerY,this.innerX,this.heightOfFrame,this.xPos,this.yPos,this.innerX,this.imageHeight),u.ctx.drawImage(this.theImage,this.theFormula+this.imageWidth-this.innerX,0,this.innerX,0-this.innerY,this.xPos,this.yPos+this.imageHeight+i*this.imageHeight,this.innerX,this.innerY)):this.innerY>0?(this.repeatY>1?u.ctx.drawImage(this.theImage,this.theFormula+this.imageWidth-this.innerX,0,this.innerX,this.heightOfFrame,this.xPos,this.yPos+this.innerY,this.innerX,this.imageHeight):u.ctx.drawImage(this.theImage,this.theFormula+this.imageWidth-this.innerX,-1*this.innerY,this.innerX,this.heightOfFrame,this.xPos,this.yPos,this.innerX,this.imageHeight),u.ctx.drawImage(this.theImage,this.theFormula+this.imageWidth-this.innerX,this.imageHeight-this.innerY,this.innerX,this.heightOfFrame,this.xPos,this.yPos,this.innerX,this.imageHeight)):u.ctx.drawImage(this.theImage,this.theFormula+this.imageWidth-this.innerX,0,this.innerX,this.heightOfFrame,this.xPos,this.yPos+this.innerY,this.innerX,this.imageHeight);let t=this.yPos+this.imageHeight;for(let e=0;e<i;e++)e<i-1?u.ctx.drawImage(this.theImage,this.theFormula+this.imageWidth-this.innerX,0,this.innerX,this.heightOfFrame,this.xPos,this.innerY+t,this.innerX,this.imageHeight):u.ctx.drawImage(this.theImage,this.theFormula+this.imageWidth-this.innerX,0,this.innerX,this.heightOfFrame-this.innerY,this.xPos,this.innerY+t,this.innerX,this.imageHeight-this.innerY),t+=this.imageHeight}else if(0===s&&this.innerX<0){this.innerY<=0?(u.ctx.drawImage(this.theImage,this.theFormula-this.innerX,-1*this.innerY,this.widthOfFrame,this.heightOfFrame,e,this.yPos,this.imageWidth,this.imageHeight),u.ctx.drawImage(this.theImage,this.theFormula-this.innerX,0,this.widthOfFrame,-1*this.innerY,e,this.yPos+this.imageHeight+i*this.imageHeight,this.imageWidth,this.innerY)):this.innerY>0?(this.repeatY>1?u.ctx.drawImage(this.theImage,this.theFormula-this.innerX,0,this.widthOfFrame,this.heightOfFrame,e,this.yPos+this.innerY,this.imageWidth,this.imageHeight):u.ctx.drawImage(this.theImage,this.theFormula-this.innerX,-1*this.innerY,this.widthOfFrame,this.heightOfFrame,e,this.yPos,this.imageWidth,this.imageHeight),u.ctx.drawImage(this.theImage,this.theFormula-this.innerX,this.imageHeight-this.innerY,this.widthOfFrame,this.heightOfFrame,e,this.yPos,this.imageWidth,this.imageHeight)):u.ctx.drawImage(this.theImage,this.theFormula-this.innerX,0,this.widthOfFrame,this.heightOfFrame,e,this.yPos+this.innerY,this.imageWidth,this.imageHeight);let t=this.yPos+this.imageHeight;for(let s=0;s<i;s++)s<i-1?u.ctx.drawImage(this.theImage,this.theFormula-this.innerX,0,this.widthOfFrame,this.heightOfFrame,e,this.innerY+t,this.imageWidth,this.imageHeight):u.ctx.drawImage(this.theImage,this.theFormula-this.innerX,0,this.widthOfFrame,this.heightOfFrame-this.innerY,e,this.innerY+t,this.imageWidth,this.imageHeight-this.innerY),t+=this.imageHeight}else if(s===t&&this.innerX<=0){this.innerY<=0?(u.ctx.drawImage(this.theImage,this.theFormula,-1*this.innerY,0-this.innerX,this.heightOfFrame,e+this.innerX,this.yPos,Math.abs(this.innerX),this.imageHeight),u.ctx.drawImage(this.theImage,this.theFormula,0,0-this.innerX,-1*this.innerY,e+this.innerX,this.yPos+this.imageHeight+i*this.imageHeight,Math.abs(this.innerX),this.innerY)):this.innerY>0?(this.repeatY>1?u.ctx.drawImage(this.theImage,this.theFormula,0,0-this.innerX,this.heightOfFrame,e+this.innerX,this.yPos+this.innerY,Math.abs(this.innerX),this.imageHeight):u.ctx.drawImage(this.theImage,this.theFormula,-1*this.innerY,0-this.innerX,this.heightOfFrame,e+this.innerX,this.yPos,Math.abs(this.innerX),this.imageHeight),u.ctx.drawImage(this.theImage,this.theFormula,this.imageHeight-this.innerY,0-this.innerX,this.heightOfFrame,e+this.innerX,this.yPos,Math.abs(this.innerX),this.imageHeight)):u.ctx.drawImage(this.theImage,this.theFormula,0,0-this.innerX,this.heightOfFrame,e+this.innerX,this.yPos+this.innerY,Math.abs(this.innerX),this.imageHeight);let t=this.yPos+this.imageHeight;for(let s=0;s<i;s++)s<i-1?u.ctx.drawImage(this.theImage,this.theFormula,0,0-this.innerX,this.heightOfFrame,e+this.innerX,this.innerY+t,Math.abs(this.innerX),this.imageHeight):u.ctx.drawImage(this.theImage,this.theFormula,0,0-this.innerX,this.heightOfFrame-this.innerY,e+this.innerX,this.innerY+t,Math.abs(this.innerX),this.imageHeight-this.innerY),t+=this.imageHeight}else if(s===t-1&&this.innerX>0){this.innerY<=0?(u.ctx.drawImage(this.theImage,this.theFormula,-1*this.innerY,this.imageWidth-this.innerX,this.heightOfFrame,e+this.innerX,this.yPos,this.imageWidth-this.innerX,this.imageHeight),u.ctx.drawImage(this.theImage,this.theFormula,0,this.imageWidth-this.innerX,-1*this.innerY,e+this.innerX,this.yPos+this.imageHeight+i*this.imageHeight,this.imageWidth-this.innerX,this.innerY)):this.innerY>0?(this.repeatY>1?u.ctx.drawImage(this.theImage,this.theFormula,0,this.imageWidth-this.innerX,this.heightOfFrame,e+this.innerX,this.yPos+this.innerY,this.imageWidth-this.innerX,this.imageHeight):u.ctx.drawImage(this.theImage,this.theFormula,-1*this.innerY,this.imageWidth-this.innerX,this.heightOfFrame,e+this.innerX,this.yPos,this.imageWidth-this.innerX,this.imageHeight),u.ctx.drawImage(this.theImage,this.theFormula,this.imageHeight-this.innerY,this.imageWidth-this.innerX,this.heightOfFrame,e+this.innerX,this.yPos,this.imageWidth-this.innerX,this.imageHeight)):u.ctx.drawImage(this.theImage,this.theFormula,0,this.imageWidth-this.innerX,this.heightOfFrame,e+this.innerX,this.yPos+this.innerY,this.imageWidth-this.innerX,this.imageHeight);let t=this.yPos+this.imageHeight;for(let s=0;s<i;s++)s<i-1?u.ctx.drawImage(this.theImage,this.theFormula,0,this.imageWidth-this.innerX,this.heightOfFrame,e+this.innerX,this.innerY+t,this.imageWidth-this.innerX,this.imageHeight):u.ctx.drawImage(this.theImage,this.theFormula,0,this.imageWidth-this.innerX,this.heightOfFrame-this.innerY,e+this.innerX,this.innerY+t,this.imageWidth-this.innerX,this.imageHeight-this.innerY),t+=this.imageHeight}else if(s===t&&this.innerX>0);else{this.innerY<=0?(u.ctx.drawImage(this.theImage,this.theFormula,-1*this.innerY,this.widthOfFrame,this.heightOfFrame,e+this.innerX,this.yPos,this.imageWidth,this.imageHeight),u.ctx.drawImage(this.theImage,this.theFormula,0,this.widthOfFrame,-1*this.innerY,e+this.innerX,this.yPos+this.imageHeight+i*this.imageHeight,this.imageWidth,this.innerY)):this.innerY>0?(this.repeatY>1?this.drawImage(e+this.innerX,this.yPos+this.innerY):u.ctx.drawImage(this.theImage,this.theFormula,-1*this.innerY,this.widthOfFrame,this.heightOfFrame,e+this.innerX,this.yPos,this.imageWidth,this.imageHeight),u.ctx.drawImage(this.theImage,this.theFormula,this.imageHeight-this.innerY,this.imageWidth,this.heightOfFrame,e+this.innerX,this.yPos,this.imageWidth,this.imageHeight)):this.drawImage(e+this.innerX,this.yPos+this.innerY);let t=this.yPos+this.imageHeight;for(let s=0;s<i;s++)s<i-1?this.drawImage(e+this.innerX,t+this.innerY):u.ctx.drawImage(this.theImage,this.theFormula,0,this.widthOfFrame,this.heightOfFrame-this.innerY,e+this.innerX,this.innerY+t,this.imageWidth,this.imageHeight-this.innerY),t+=this.imageHeight}e+=this.imageWidth}u.ctx.globalAlpha=1,this.jumping&&u.jump(this,this.jumpHeight,this.jumpLength),this.dragging?u.draggingWithMouse?(this.xPos=u.mouseX-this.width/2,this.yPos=u.mouseY-this.height/2):(this.xPos=u.touchMoveX-this.width/2,this.yPos=u.touchMoveY-this.height/2):(this.xPos+=this.velX,this.yPos+=this.velY,this.innerX+=this.innerVelX,this.innerY+=this.innerVelY,this.hitBoxX=this.xPos,this.hitBoxY=this.yPos,this.hitBoxWidth=this.width,this.hitBoxHeight=this.height),this.timeThroughLoop+=1}addAnimation(t,i,e){this.animations.push({name:t,startFrame:i,numberOfFrames:e})}changeAnimationTo(t){for(let i=0;i<this.animations.length;i++)this.animations[i].name===t&&(this.currentAnimation=i)}drawImage(t,i){u.ctx.drawImage(this.theImage,this.theFormula,0,this.widthOfFrame,this.heightOfFrame,t,i,this.imageWidth,this.imageHeight)}hitDetect(){this.detectHit||(u.hitDetectObjects.push(this),this.detectHit=!0)}onClick(t,i){this.clickFunction=t,i&&(this.triggerClickOnce=!0)}onHold(t){this.holdFunction=t,u.holdableObjects.includes(this)||u.holdableObjects.push(this)}drag(){this.dragging=!0}platform(t){this.hitDetect(),this.block=!!t,u.platforms.push(this)}notPlatform(){this.block=!1;for(let t=0;t<u.platforms.length;t++)u.platforms[t]===this&&u.platforms.splice(t,1)}feelGravity(t){this.hitDetect(),u.gravity.includes(this)?(this.gravity=!0,this.accelerating=0,this.gravityLevel=t||14,this.originalGravityLevel=this.gravityLevel,this.accelerationRate=.05*this.originalGravityLevel):(u.gravity.push(this),this.gravity=!0,this.accelerating=0,this.gravityLevel=t||14,this.originalGravityLevel=this.gravityLevel,this.accelerationRate=.05*this.originalGravityLevel)}noGravity(){this.gravity=!1;for(let t=0;t<u.gravity.length;t++)u.gravity[t]===this&&u.gravity.splice(t,1)}onGravity(){this.landed||this.jumping||(this.accelerating<this.originalGravityLevel&&(this.accelerating+=this.accelerationRate,this.velY=this.accelerating),this.accelerating>=this.originalGravityLevel&&(this.velY=this.originalGravityLevel))}jump(t,i){this.hitDetect(),this.gravity?(this.noDoubleJumps=!!i,this.noDoubleJumps?this.landed&&(this.accelerationRate=.05*this.originalGravityLevel,this.velY=0,this.jumpStart=this.yPos,this.jumpHeight=t,this.jumping=!0):(this.accelerationRate=.05*this.originalGravityLevel,this.velY=0,this.jumpStart=this.yPos,this.jumpHeight=t,this.jumping=!0)):console.warn("object.feelGravity() must be called for jump to work. üòá")}destroy(){const t=t=>{for(let i=t.length;i>=0;i--)t[i]&&t[i].id&&t[i].id===this.id&&t.splice(i,1)};for(let t=0;t<u.collisions.length;t++)u.collisions[t].obj1.id!==this.id&&u.collisions[t].obj2.id!==this.id||u.collisions.splice(t,1);t(u.allBackgrounds),t(u.allGameObjects),t(u.hitDetectObjects),t(u.holdableObjects),t(u.gravity),t(u.platforms),u.delete(this)}};function E(t){if(t.distanceFromMe){let i;if(i=u.touchX?t.distanceFromMe(u.touchX,u.touchY):t.distanceFromMe(u.mouseX,u.mouseY),i<.1*t.thickness)return!0}}function z(t,i,e,s){for(let h=0;h<t.length;h++){let a=t[h];const n=()=>{!a.clickFunction&&s?u.heldObject=a:a.clickFunction&&(a.clickFunction(),a.triggerClickOnce&&(a.clickFunction=null))};(E(a)||i>=a.hitBoxX&&e>=a.hitBoxY&&i<=a.hitBoxX+a.hitBoxWidth&&e<=a.hitBoxY+a.hitBoxHeight)&&n()}}function q(t){u.draggingWithMouse=!0,at(),z(u.holdableObjects,u.mouseX,u.mouseY,!0)}function U(t){u.draggingWithMouse=!1;let i=u.canvas.getBoundingClientRect();u.touchX=Math.floor(t.touches[0].clientX-i.left),u.touchY=Math.floor(t.touches[0].clientY-i.top),u.touchMoveX=Math.floor(t.touches[0].clientX-i.left),u.touchMoveY=u.touchY=Math.floor(t.touches[0].clientY-i.top),z(u.holdableObjects,u.touchX,u.touchY,!0),u.draggingWithMouse=!1,at(),"function"==typeof u.globalTouch&&u.globalTouch()}let N=u.mouseX,V=u.mouseY,_=u.touchX,$=u.touchY,J=u.touchMoveX,K=u.touchMoveY,Q=u.touchEndX,Z=u.touchEndY,tt=u.width,it=u.height,et=0,st=0,ht=0;function at(){N=u.mouseX,V=u.mouseY,_=u.touchX,$=u.touchY,J=u.touchMoveX,K=u.touchMoveY,Q=u.touchEndX,Z=u.touchEndY,tt=u.width,it=u.height,et=u.percentLoaded,st=u.percentImagesLoaded,ht=u.percentSoundLoaded}const nt=(t,i)=>{"function"==typeof t?(u.globalClick=t,i&&(u.globalClickTriggerOnce=!0)):console.error("@onClick üëâ typeerror: onClick requires a callback function.")},ot=t=>{"function"==typeof t?u.globalTouch=t:console.error("@onTouch üëâ typeerror: onTouch requires a callback function.")};function rt(t){u.loadingCallback=t}function ct(t){u.firstTimeCallback=t}function lt(){u.clear=!0}function dt(){u.clear=!1}function gt(){u.cancelDraw=!0}function ut(){u.cancelDraw=!1}function mt(){u.exit=!0}function ft(t,i){u.canvas.width=t,u.canvas.height=i,u.width=t,u.height=i}function pt(){document.body.style.position="fixed",document.body.style.top=0,document.body.style.left=0,document.body.style.margin=0,document.body.style.padding=0,window.innerWidth<900?(j("canvas",window.innerWidth,window.innerHeight),u.sizeToWindow=!0):j("canvas",900,500),u.canvas.style.position="relative",u.canvas.style.left=0,u.canvas.style.userSelect="none",document.body.style.userSelect="none",document.body.style.msUserSelect="none",document.body.style.webkitUserSelect="none",document.body.style.mozUserSelect="none",document.body.style.webkitTouchCallout="none",document.body.style.height=window.innerHeight,S()}function yt(t){"function"==typeof t?u.onResize=t:console.error("üëÆ‚Äç‚ôÄÔ∏è@onResize: Type error. Callback must be a function.")}document.addEventListener("touchstart",U,!1),document.addEventListener("touchmove",(function(t){let i=u.canvas.getBoundingClientRect();u.draggingWithMouse=!1,u.touchMoveX=t.touches[0].clientX-i.left,u.touchMoveY=t.touches[0].clientY-i.top,at()})),document.addEventListener("touchend",(function(t){u.heldObject=null,u.allGameObjects.forEach(t=>{t.dragging=!1});let i=u.canvas.getBoundingClientRect();u.touchEndX=Math.floor(t.changedTouches[0].clientX-i.left),u.touchEndY=Math.floor(t.changedTouches[0].clientY-i.top),u.touchX=null,u.touchY=null,u.touchMoveX=null,u.touchMoveY=null,at()})),document.addEventListener("click",(function(t){!function(t){if(u.canvas){let i=u.canvas.getBoundingClientRect();u.mouseX=Math.floor(t.clientX-i.left),u.mouseY=Math.floor(t.clientY-i.top),u.heldObject=null,at(),"function"==typeof u.globalClick&&(u.globalClick(),u.globalClickTriggerOnce&&(u.globalClick=null)),u.allGameObjects.forEach(t=>{t.dragging=!1}),z(u.allGameObjects,u.mouseX,u.mouseY)}}(t)})),document.addEventListener("mousemove",(function(t){!function(t){if(u.canvas){let i=u.canvas.getBoundingClientRect();u.mouseX=Math.floor(t.clientX-i.left),u.mouseY=Math.floor(t.clientY-i.top),at()}}(t)})),document.addEventListener("mousedown",(function(t){q()})),document.addEventListener("mouseup",(function(){u.heldObject=null,at(),u.allGameObjects.forEach(t=>{t.dragging=!1})})),document.addEventListener("pointerdown",(function(){q(event)})),document.addEventListener("keydown",w,!1),document.addEventListener("keyup",v,!1),console.log("Ÿ©(‡πë^o^‡πë)€∂","Welcome to s2pd!·Éö(‚ïπ‚ó°‚ïπ·Éö)")}]);